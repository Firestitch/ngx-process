import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChild, ContentChildren, EventEmitter, Input, Output, TemplateRef, ViewChild, } from '@angular/core';
import { MatBottomSheet } from '@angular/material/bottom-sheet';
import { MatMenu, MatMenuTrigger } from '@angular/material/menu';
import { BreakpointObserver } from '@angular/cdk/layout';
import { Subject } from 'rxjs';
import { debounceTime, takeUntil } from 'rxjs/operators';
import { FsBottomSheetComponent } from './bottom-sheet/fs-bottom-sheet.component';
import { FsMenuItemDirective } from '../../directives/menu-item/fs-menu-item.directive';
import { FsMenuTitleDirective } from '../../directives/menu-title/fs-menu-title.directive';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/bottom-sheet";
import * as i2 from "@angular/cdk/layout";
import * as i3 from "@angular/material/button";
import * as i4 from "@angular/material/icon";
import * as i5 from "@angular/material/menu";
import * as i6 from "./menu-items-list/menu-items-list.component";
import * as i7 from "@angular/common";
export class FsMenuComponent {
    constructor(_bottomSheet, _breakpointObserver, _cd) {
        this._bottomSheet = _bottomSheet;
        this._breakpointObserver = _breakpointObserver;
        this._cd = _cd;
        this.klass = null;
        this.buttonClass = '';
        this.opened = new EventEmitter();
        this.closed = new EventEmitter();
        // Items with TemplateRefs and DirectiveRef for passing to bottomSheet
        this.items = [];
        this.useInternalTrigger = false;
        this.mobile = false;
        this.menuOpened = false;
        this.initialized = false;
        this._resolutionChanged = false;
        // Active bottom sheet that was opened
        this._activeSheetRef = null;
        this._destroy$ = new Subject();
        this._cd.detach();
    }
    set itemsElements(value) {
        this.items = value.toArray();
    }
    // Catch trigger for matMenu
    set internalMatMenuTrigger(val) {
        if (val) {
            this.useInternalTrigger = true;
        }
        this._internalMatMenuTrigger = val;
    }
    ;
    set externalMatMenuTrigger(val) {
        this.useInternalTrigger = false;
        this._externalMatMenuTrigger = val;
        this._cd.detectChanges();
    }
    set resolutionChanged(val) {
        this._resolutionChanged = val;
    }
    get resolutionChanged() {
        return this._resolutionChanged;
    }
    get matMenuTrigger() {
        if (this.useInternalTrigger) {
            return this._internalMatMenuTrigger;
        }
        else {
            return this._externalMatMenuTrigger;
        }
    }
    ngOnInit() {
        this.subscribeToResChanges();
        this.initialized = true;
        this._cd.detectChanges();
    }
    ngAfterViewInit() {
        if (!this._externalMatMenuTrigger) {
            this.useInternalTrigger = true;
            this._cd.detectChanges();
        }
    }
    ngOnDestroy() {
        this._destroy$.next();
        this._destroy$.complete();
    }
    /**
     * Subscribe to window resolution changes
     * and switch between mobile and desktop
     */
    subscribeToResChanges() {
        const layoutChanges = this._breakpointObserver.observe([
            FsMenuComponent.MOBILE_BREAKPOINT,
        ]);
        layoutChanges
            .pipe(debounceTime(500), takeUntil(this._destroy$))
            .subscribe(result => {
            // Set mobile/desktop flag
            this.mobile = result.breakpoints[FsMenuComponent.MOBILE_BREAKPOINT];
            if (this.menuOpened) {
                // Flag that menus was closed not by user
                this.resolutionChanged = true;
                if (this.mobile) {
                    this.closeMatMenu();
                    this.openSheetMenu();
                }
                else {
                    this.closeSheetMenu();
                    // Must be here because we should wait till menuTrigger will be catched by @ViewChild
                    setTimeout(() => {
                        if (this.matMenuTrigger) {
                            this.matMenuTrigger.openMenu();
                            // Detect changes because for strategies like OnPush if won't detected by default
                            this._cd.detectChanges();
                        }
                    });
                }
                // Detect changes because for strategies like OnPush if won't detected by default
                this._cd.detectChanges();
            }
            else {
                // Detect changes because for strategies like OnPush if won't detected by default
                this._cd.detectChanges();
            }
        });
    }
    /**
     * Open fs menu depends from mode
     */
    openMenu() {
        if (this.mobile) {
            this.openSheetMenu();
        }
        else {
            this.openMatMenu();
        }
        this.opened.emit();
        this._cd.detectChanges();
    }
    /**
     * Close fs menu depends from mode
     */
    closeMenu() {
        if (this.mobile) {
            this.closeSheetMenu();
        }
        else {
            this.closeMatMenu();
        }
    }
    /**
     * Open Mat Menu
     */
    openMatMenu() {
        this.menuOpened = true;
        this.resolutionChanged = false;
        this.matMenuTrigger.openMenu();
    }
    /**
     * Close Mat Menu
     */
    closeMatMenu() {
        if (this.matMenuTrigger) {
            this.matMenuTrigger.closeMenu();
        }
    }
    /**
     * After menu close event
     */
    closedMatMenu() {
        if (!this.resolutionChanged) {
            this.menuOpened = false;
        }
        this.resolutionChanged = false;
        this.closed.emit();
    }
    /**
     * Open Mat Bottom Sheet
     */
    openSheetMenu() {
        this._activeSheetRef = this._bottomSheet.open(FsBottomSheetComponent, {
            data: { items: this.items, titleTemplate: this.titleTemplate, klass: this.klass }
        });
        this.menuOpened = true;
        this._activeSheetRef.afterDismissed()
            .pipe(takeUntil(this._destroy$))
            .subscribe(() => {
            if (!this.resolutionChanged) {
                this.menuOpened = false;
            }
            this.resolutionChanged = false;
        });
    }
    /**
     * Close Mat Bottom Sheet
     */
    closeSheetMenu() {
        if (this._activeSheetRef) {
            this._activeSheetRef.dismiss();
        }
    }
}
FsMenuComponent.MOBILE_BREAKPOINT = '(max-width: 599px)';
/** @nocollapse */ FsMenuComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.13", ngImport: i0, type: FsMenuComponent, deps: [{ token: i1.MatBottomSheet }, { token: i2.BreakpointObserver }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
/** @nocollapse */ FsMenuComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.13", type: FsMenuComponent, selector: "fs-menu", inputs: { klass: ["class", "klass"], buttonClass: "buttonClass" }, outputs: { opened: "opened", closed: "closed" }, queries: [{ propertyName: "titleTemplate", first: true, predicate: FsMenuTitleDirective, descendants: true, read: TemplateRef }, { propertyName: "itemsElements", predicate: FsMenuItemDirective }], viewQueries: [{ propertyName: "internalMatMenuTrigger", first: true, predicate: MatMenuTrigger, descendants: true }, { propertyName: "fsMenuRef", first: true, predicate: ["fsMenu"], descendants: true, static: true }], ngImport: i0, template: "<ng-template [ngIf]=\"!mobile\" [ngIfElse]=\"sheetMenu\">\n  <button type=\"button\"\n          [ngClass]=\"buttonClass\"\n          mat-icon-button\n          *ngIf=\"useInternalTrigger\"\n          [matMenuTriggerFor]=\"fsMenu\"\n          #menuTrigger=\"matMenuTrigger\"\n          (click)=\"openMenu()\"\n  >\n    <mat-icon>more_vert</mat-icon>\n  </button>\n</ng-template>\n\n<ng-template #sheetMenu>\n  <button type=\"button\"\n          mat-icon-button\n          [ngClass]=\"buttonClass\"\n          *ngIf=\"useInternalTrigger\"\n          (click)=\"openMenu()\">\n    <mat-icon>more_vert</mat-icon>\n  </button>\n</ng-template>\n\n\n<mat-menu #fsMenu=\"matMenu\" [class]=\"klass\" (close)=\"closedMatMenu()\">\n  <div class=\"mat-menu-item fs-menu-title\" *ngIf=\"titleTemplate\" disabled>\n    <ng-template [ngTemplateOutlet]=\"titleTemplate\"></ng-template>\n  </div>\n  <div class=\"fs-menu-container\" [ngClass]=\"{ 'with-title': !!titleTemplate }\">\n    <fs-menu-items-list [items]=\"items\"></fs-menu-items-list>\n  </div>\n</mat-menu>\n", styles: ["::ng-deep *[hidden]{display:none!important}\n"], components: [{ type: i3.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { type: i4.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { type: i5.MatMenu, selector: "mat-menu", exportAs: ["matMenu"] }, { type: i6.MenuItemsListComponent, selector: "fs-menu-items-list", inputs: ["items", "parentVisible"] }], directives: [{ type: i7.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i7.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i5.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", exportAs: ["matMenuTrigger"] }, { type: i7.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.13", ngImport: i0, type: FsMenuComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'fs-menu',
                    templateUrl: 'fs-menu.component.html',
                    styleUrls: ['fs-menu.component.scss'],
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i1.MatBottomSheet }, { type: i2.BreakpointObserver }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { klass: [{
                type: Input,
                args: ['class']
            }], buttonClass: [{
                type: Input,
                args: ['buttonClass']
            }], opened: [{
                type: Output
            }], closed: [{
                type: Output
            }], titleTemplate: [{
                type: ContentChild,
                args: [FsMenuTitleDirective, { read: TemplateRef }]
            }], itemsElements: [{
                type: ContentChildren,
                args: [FsMenuItemDirective]
            }], internalMatMenuTrigger: [{
                type: ViewChild,
                args: [MatMenuTrigger]
            }], fsMenuRef: [{
                type: ViewChild,
                args: ['fsMenu', { static: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnMtbWVudS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvYXBwL2NvbXBvbmVudHMvZnMtbWVudS9mcy1tZW51LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9hcHAvY29tcG9uZW50cy9mcy1tZW51L2ZzLW1lbnUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLHVCQUF1QixFQUN2QixpQkFBaUIsRUFDakIsU0FBUyxFQUNULFlBQVksRUFDWixlQUFlLEVBQ2YsWUFBWSxFQUNaLEtBQUssRUFHTCxNQUFNLEVBQ04sV0FBVyxFQUNYLFNBQVMsR0FDVixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsY0FBYyxFQUFxQixNQUFNLGdDQUFnQyxDQUFDO0FBQ25GLE9BQU8sRUFBRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDakUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFekQsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXpELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBRWxGLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLG1EQUFtRCxDQUFDO0FBQ3hGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFEQUFxRCxDQUFDOzs7Ozs7Ozs7QUFTM0YsTUFBTSxPQUFPLGVBQWU7SUE0RDFCLFlBQ1UsWUFBNEIsRUFDNUIsbUJBQXVDLEVBQ3ZDLEdBQXNCO1FBRnRCLGlCQUFZLEdBQVosWUFBWSxDQUFnQjtRQUM1Qix3QkFBbUIsR0FBbkIsbUJBQW1CLENBQW9CO1FBQ3ZDLFFBQUcsR0FBSCxHQUFHLENBQW1CO1FBN0RULFVB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Q0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO2FBQ3pCO1lBRUQsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztRQUNqQyxDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUM7SUFFRDs7T0FFRztJQUNJLGNBQWM7UUFDbkIsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3hCLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDaEM7SUFDSCxDQUFDOztBQXJPYSxpQ0FBaUIsR0FBRyxvQkFBb0IsQ0FBQztnSUFYNUMsZUFBZTtvSEFBZixlQUFlLDhNQXNCWixvQkFBb0IsMkJBQVUsV0FBVyxnREFHdEMsbUJBQW1CLHFGQU16QixjQUFjLG9KQ2xFM0IsK2hDQWdDQTs0RkRHYSxlQUFlO2tCQU4zQixTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxTQUFTO29CQUNuQixXQUFXLEVBQUUsd0JBQXdCO29CQUNyQyxTQUFTLEVBQUUsQ0FBRSx3QkFBd0IsQ0FBRTtvQkFDdkMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07aUJBQ2hEO3NLQUd3QixLQUFLO3NCQUEzQixLQUFLO3VCQUFDLE9BQU87Z0JBQ2UsV0FBVztzQkFBdkMsS0FBSzt1QkFBQyxhQUFhO2dCQUdiLE1BQU07c0JBRFosTUFBTTtnQkFJQSxNQUFNO3NCQURaLE1BQU07Z0JBZUEsYUFBYTtzQkFEbkIsWUFBWTt1QkFBQyxvQkFBb0IsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7Z0JBSXJELGFBQWE7c0JBRGhCLGVBQWU7dUJBQUMsbUJBQW1CO2dCQU9oQyxzQkFBc0I7c0JBRHpCLFNBQVM7dUJBQUMsY0FBYztnQkFpQmxCLFNBQVM7c0JBRGYsU0FBUzt1QkFBQyxRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIENvbnRlbnRDaGlsZCxcbiAgQ29udGVudENoaWxkcmVuLFxuICBFdmVudEVtaXR0ZXIsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBUZW1wbGF0ZVJlZixcbiAgVmlld0NoaWxkLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgTWF0Qm90dG9tU2hlZXQsIE1hdEJvdHRvbVNoZWV0UmVmIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvYm90dG9tLXNoZWV0JztcbmltcG9ydCB7IE1hdE1lbnUsIE1hdE1lbnVUcmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvbWVudSc7XG5pbXBvcnQgeyBCcmVha3BvaW50T2JzZXJ2ZXIgfSBmcm9tICdAYW5ndWxhci9jZGsvbGF5b3V0JztcblxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7IEZzQm90dG9tU2hlZXRDb21wb25lbnQgfSBmcm9tICcuL2JvdHRvbS1zaGVldC9mcy1ib3R0b20tc2hlZXQuY29tcG9uZW50JztcblxuaW1wb3J0IHsgRnNNZW51SXRlbURpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvbWVudS1pdGVtL2ZzLW1lbnUtaXRlbS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgRnNNZW51VGl0bGVEaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL21lbnUtdGl0bGUvZnMtbWVudS10aXRsZS5kaXJlY3RpdmUnO1xuXG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2ZzLW1lbnUnLFxuICB0ZW1wbGF0ZVVybDogJ2ZzLW1lbnUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsgJ2ZzLW1lbnUuY29tcG9uZW50LnNjc3MnIF0sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBGc01lbnVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XG5cbiAgQElucHV0KCdjbGFzcycpIHB1YmxpYyBrbGFzcyA9IG51bGw7XG4gIEBJbnB1dCgnYnV0dG9uQ2xhc3MnKSBwdWJsaWMgYnV0dG9uQ2xhc3MgPSAnJztcblxuICBAT3V0cHV0KClcbiAgcHVibGljIG9wZW5lZCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICBAT3V0cHV0KClcbiAgcHVibGljIGNsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICBwdWJsaWMgc3RhdGljIE1PQklMRV9CUkVBS1BPSU5UID0gJyhtYXgtd2lkdGg6IDU5OXB4KSc7XG5cbiAgLy8gSXRlbXMgd2l0aCBUZW1wbGF0ZVJlZnMgYW5kIERpcmVjdGl2ZVJlZiBmb3IgcGFzc2luZyB0byBib3R0b21TaGVldFxuICBwdWJsaWMgaXRlbXM6IEZzTWVudUl0ZW1EaXJlY3RpdmVbXSA9IFtdO1xuXG4gIHB1YmxpYyB1c2VJbnRlcm5hbFRyaWdnZXIgPSBmYWxzZTtcbiAgcHVibGljIG1vYmlsZSA9IGZhbHNlO1xuICBwdWJsaWMgbWVudU9wZW5lZCA9IGZhbHNlO1xuICBwdWJsaWMgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAvKiogVGl0bGUgKiovXG4gIEBDb250ZW50Q2hpbGQoRnNNZW51VGl0bGVEaXJlY3RpdmUsIHsgcmVhZDogVGVtcGxhdGVSZWYgfSlcbiAgcHVibGljIHRpdGxlVGVtcGxhdGU7XG5cbiAgQENvbnRlbnRDaGlsZHJlbihGc01lbnVJdGVtRGlyZWN0aXZlKVxuICBzZXQgaXRlbXNFbGVtZW50cyh2YWx1ZSkge1xuICAgIHRoaXMuaXRlbXMgPSB2YWx1ZS50b0FycmF5KCk7XG4gIH1cblxuICAvLyBDYXRjaCB0cmlnZ2VyIGZvciBtYXRNZW51XG4gIEBWaWV3Q2hpbGQoTWF0TWVudVRyaWdnZXIpXG4gIHNldCBpbnRlcm5hbE1hdE1lbnVUcmlnZ2VyKHZhbCkge1xuICAgIGlmICh2YWwpIHtcbiAgICAgIHRoaXMudXNlSW50ZXJuYWxUcmlnZ2VyID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbnRlcm5hbE1hdE1lbnVUcmlnZ2VyID0gdmFsO1xuICB9O1xuXG4gIHNldCBleHRlcm5hbE1hdE1lbnVUcmlnZ2VyKHZhbCkge1xuICAgIHRoaXMudXNlSW50ZXJuYWxUcmlnZ2VyID0gZmFsc2U7XG4gICAgdGhpcy5fZXh0ZXJuYWxNYXRNZW51VHJpZ2dlciA9IHZhbDtcblxuICAgIHRoaXMuX2NkLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIEBWaWV3Q2hpbGQoJ2ZzTWVudScsIHsgc3RhdGljOiB0cnVlIH0pXG4gIHB1YmxpYyBmc01lbnVSZWY6IE1hdE1lbnU7XG5cbiAgcHJpdmF0ZSBfaW50ZXJuYWxNYXRNZW51VHJpZ2dlcjtcbiAgcHJpdmF0ZSBfZXh0ZXJuYWxNYXRNZW51VHJpZ2dlcjtcblxuICBwcml2YXRlIF9yZXNvbHV0aW9uQ2hhbmdlZCA9IGZhbHNlO1xuXG4gIC8vIEFjdGl2ZSBib3R0b20gc2hlZXQgdGhhdCB3YXMgb3BlbmVkXG4gIHByaXZhdGUgX2FjdGl2ZVNoZWV0UmVmOiBNYXRCb3R0b21TaGVldFJlZiA9IG51bGw7XG5cbiAgcHJpdmF0ZSBfZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2JvdHRvbVNoZWV0OiBNYXRCb3R0b21TaGVldCxcbiAgICBwcml2YXRlIF9icmVha3BvaW50T2JzZXJ2ZXI6IEJyZWFrcG9pbnRPYnNlcnZlcixcbiAgICBwcml2YXRlIF9jZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICkge1xuICAgIHRoaXMuX2NkLmRldGFjaCgpO1xuICB9XG5cbiAgc2V0IHJlc29sdXRpb25DaGFuZ2VkKHZhbCkge1xuICAgIHRoaXMuX3Jlc29sdXRpb25DaGFuZ2VkID0gdmFsO1xuICB9XG5cbiAgZ2V0IHJlc29sdXRpb25DaGFuZ2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXNvbHV0aW9uQ2hhbmdlZDtcbiAgfVxuXG4gIGdldCBtYXRNZW51VHJpZ2dlcigpIHtcbiAgICBpZiAodGhpcy51c2VJbnRlcm5hbFRyaWdnZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbE1hdE1lbnVUcmlnZ2VyO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fZXh0ZXJuYWxNYXRNZW51VHJpZ2dlcjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5zdWJzY3JpYmVUb1Jlc0NoYW5nZXMoKTtcbiAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcblxuICAgIHRoaXMuX2NkLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIHB1YmxpYyBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9leHRlcm5hbE1hdE1lbnVUcmlnZ2VyKSB7XG4gICAgICB0aGlzLnVzZUludGVybmFsVHJpZ2dlciA9IHRydWU7XG4gICAgICB0aGlzLl9jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuX2Rlc3Ryb3kkLm5leHQoKTtcbiAgICB0aGlzLl9kZXN0cm95JC5jb21wbGV0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byB3aW5kb3cgcmVzb2x1dGlvbiBjaGFuZ2VzXG4gICAqIGFuZCBzd2l0Y2ggYmV0d2VlbiBtb2JpbGUgYW5kIGRlc2t0b3BcbiAgICovXG4gIHB1YmxpYyBzdWJzY3JpYmVUb1Jlc0NoYW5nZXMoKSB7XG4gICAgY29uc3QgbGF5b3V0Q2hhbmdlcyA9IHRoaXMuX2JyZWFrcG9pbnRPYnNlcnZlci5vYnNlcnZlKFtcbiAgICAgIEZzTWVudUNvbXBvbmVudC5NT0JJTEVfQlJFQUtQT0lOVCxcbiAgICBdKTtcblxuICAgIGxheW91dENoYW5nZXNcbiAgICAgIC5waXBlKFxuICAgICAgICBkZWJvdW5jZVRpbWUoNTAwKSxcbiAgICAgICAgdGFrZVVudGlsKHRoaXMuX2Rlc3Ryb3kkKSxcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICAgICAgLy8gU2V0IG1vYmlsZS9kZXNrdG9wIGZsYWdcbiAgICAgICAgdGhpcy5tb2JpbGUgPSByZXN1bHQuYnJlYWtwb2ludHNbRnNNZW51Q29tcG9uZW50Lk1PQklMRV9CUkVBS1BPSU5UXTtcblxuICAgICAgICBpZiAodGhpcy5tZW51T3BlbmVkKSB7XG5cbiAgICAgICAgICAvLyBGbGFnIHRoYXQgbWVudXMgd2FzIGNsb3NlZCBub3QgYnkgdXNlclxuICAgICAgICAgIHRoaXMucmVzb2x1dGlvbkNoYW5nZWQgPSB0cnVlO1xuXG4gICAgICAgICAgaWYgKHRoaXMubW9iaWxlKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlTWF0TWVudSgpO1xuICAgICAgICAgICAgdGhpcy5vcGVuU2hlZXRNZW51KCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VTaGVldE1lbnUoKTtcblxuICAgICAgICAgICAgLy8gTXVzdCBiZSBoZXJlIGJlY2F1c2Ugd2Ugc2hvdWxkIHdhaXQgdGlsbCBtZW51VHJpZ2dlciB3aWxsIGJlIGNhdGNoZWQgYnkgQFZpZXdDaGlsZFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLm1hdE1lbnVUcmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXRNZW51VHJpZ2dlci5vcGVuTWVudSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gRGV0ZWN0IGNoYW5nZXMgYmVjYXVzZSBmb3Igc3RyYXRlZ2llcyBsaWtlIE9uUHVzaCBpZiB3b24ndCBkZXRlY3RlZCBieSBkZWZhdWx0XG4gICAgICAgICAgICAgICAgdGhpcy5fY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBEZXRlY3QgY2hhbmdlcyBiZWNhdXNlIGZvciBzdHJhdGVnaWVzIGxpa2UgT25QdXNoIGlmIHdvbid0IGRldGVjdGVkIGJ5IGRlZmF1bHRcbiAgICAgICAgICB0aGlzLl9jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRGV0ZWN0IGNoYW5nZXMgYmVjYXVzZSBmb3Igc3RyYXRlZ2llcyBsaWtlIE9uUHVzaCBpZiB3b24ndCBkZXRlY3RlZCBieSBkZWZhdWx0XG4gICAgICAgICAgdGhpcy5fY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVuIGZzIG1lbnUgZGVwZW5kcyBmcm9tIG1vZGVcbiAgICovXG4gIHB1YmxpYyBvcGVuTWVudSgpIHtcbiAgICBpZiAodGhpcy5tb2JpbGUpIHtcbiAgICAgIHRoaXMub3BlblNoZWV0TWVudSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9wZW5NYXRNZW51KCk7XG4gICAgfVxuXG4gICAgdGhpcy5vcGVuZWQuZW1pdCgpO1xuXG4gICAgdGhpcy5fY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIGZzIG1lbnUgZGVwZW5kcyBmcm9tIG1vZGVcbiAgICovXG4gIHB1YmxpYyBjbG9zZU1lbnUoKSB7XG4gICAgaWYgKHRoaXMubW9iaWxlKSB7XG4gICAgICB0aGlzLmNsb3NlU2hlZXRNZW51KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xvc2VNYXRNZW51KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9wZW4gTWF0IE1lbnVcbiAgICovXG4gIHB1YmxpYyBvcGVuTWF0TWVudSgpIHtcbiAgICB0aGlzLm1lbnVPcGVuZWQgPSB0cnVlO1xuICAgIHRoaXMucmVzb2x1dGlvbkNoYW5nZWQgPSBmYWxzZTtcblxuICAgIHRoaXMubWF0TWVudVRyaWdnZXIub3Blbk1lbnUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZSBNYXQgTWVudVxuICAgKi9cbiAgcHVibGljIGNsb3NlTWF0TWVudSgpIHtcbiAgICBpZiAodGhpcy5tYXRNZW51VHJpZ2dlcikge1xuICAgICAgdGhpcy5tYXRNZW51VHJpZ2dlci5jbG9zZU1lbnUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWZ0ZXIgbWVudSBjbG9zZSBldmVudFxuICAgKi9cbiAgcHVibGljIGNsb3NlZE1hdE1lbnUoKSB7XG4gICAgaWYgKCF0aGlzLnJlc29sdXRpb25DaGFuZ2VkKSB7XG4gICAgICB0aGlzLm1lbnVPcGVuZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc29sdXRpb25DaGFuZ2VkID0gZmFsc2U7XG5cbiAgICB0aGlzLmNsb3NlZC5lbWl0KCk7XG4gIH1cblxuICAvKipcbiAgICogT3BlbiBNYXQgQm90dG9tIFNoZWV0XG4gICAqL1xuICBwdWJsaWMgb3BlblNoZWV0TWVudSgpIHtcbiAgICB0aGlzLl9hY3RpdmVTaGVldFJlZiA9IHRoaXMuX2JvdHRvbVNoZWV0Lm9wZW4oRnNCb3R0b21TaGVldENvbXBvbmVudCwge1xuICAgICAgZGF0YTogeyBpdGVtczogdGhpcy5pdGVtcywgdGl0bGVUZW1wbGF0ZTogdGhpcy50aXRsZVRlbXBsYXRlLCBrbGFzczogdGhpcy5rbGFzcyB9XG4gICAgfSk7XG5cbiAgICB0aGlzLm1lbnVPcGVuZWQgPSB0cnVlO1xuXG4gICAgdGhpcy5fYWN0aXZlU2hlZXRSZWYuYWZ0ZXJEaXNtaXNzZWQoKVxuICAgICAgLnBpcGUoXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLl9kZXN0cm95JCksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLnJlc29sdXRpb25DaGFuZ2VkKSB7XG4gICAgICAgICAgdGhpcy5tZW51T3BlbmVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc29sdXRpb25DaGFuZ2VkID0gZmFsc2U7XG4gICAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIE1hdCBCb3R0b20gU2hlZXRcbiAgICovXG4gIHB1YmxpYyBjbG9zZVNoZWV0TWVudSgpIHtcbiAgICBpZiAodGhpcy5fYWN0aXZlU2hlZXRSZWYpIHtcbiAgICAgIHRoaXMuX2FjdGl2ZVNoZWV0UmVmLmRpc21pc3MoKTtcbiAgICB9XG4gIH1cbn1cbiIsIjxuZy10ZW1wbGF0ZSBbbmdJZl09XCIhbW9iaWxlXCIgW25nSWZFbHNlXT1cInNoZWV0TWVudVwiPlxuICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIFtuZ0NsYXNzXT1cImJ1dHRvbkNsYXNzXCJcbiAgICAgICAgICBtYXQtaWNvbi1idXR0b25cbiAgICAgICAgICAqbmdJZj1cInVzZUludGVybmFsVHJpZ2dlclwiXG4gICAgICAgICAgW21hdE1lbnVUcmlnZ2VyRm9yXT1cImZzTWVudVwiXG4gICAgICAgICAgI21lbnVUcmlnZ2VyPVwibWF0TWVudVRyaWdnZXJcIlxuICAgICAgICAgIChjbGljayk9XCJvcGVuTWVudSgpXCJcbiAgPlxuICAgIDxtYXQtaWNvbj5tb3JlX3ZlcnQ8L21hdC1pY29uPlxuICA8L2J1dHRvbj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjc2hlZXRNZW51PlxuICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIG1hdC1pY29uLWJ1dHRvblxuICAgICAgICAgIFtuZ0NsYXNzXT1cImJ1dHRvbkNsYXNzXCJcbiAgICAgICAgICAqbmdJZj1cInVzZUludGVybmFsVHJpZ2dlclwiXG4gICAgICAgICAgKGNsaWNrKT1cIm9wZW5NZW51KClcIj5cbiAgICA8bWF0LWljb24+bW9yZV92ZXJ0PC9tYXQtaWNvbj5cbiAgPC9idXR0b24+XG48L25nLXRlbXBsYXRlPlxuXG5cbjxtYXQtbWVudSAjZnNNZW51PVwibWF0TWVudVwiIFtjbGFzc109XCJrbGFzc1wiIChjbG9zZSk9XCJjbG9zZWRNYXRNZW51KClcIj5cbiAgPGRpdiBjbGFzcz1cIm1hdC1tZW51LWl0ZW0gZnMtbWVudS10aXRsZVwiICpuZ0lmPVwidGl0bGVUZW1wbGF0ZVwiIGRpc2FibGVkPlxuICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJ0aXRsZVRlbXBsYXRlXCI+PC9uZy10ZW1wbGF0ZT5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJmcy1tZW51LWNvbnRhaW5lclwiIFtuZ0NsYXNzXT1cInsgJ3dpdGgtdGl0bGUnOiAhIXRpdGxlVGVtcGxhdGUgfVwiPlxuICAgIDxmcy1tZW51LWl0ZW1zLWxpc3QgW2l0ZW1zXT1cIml0ZW1zXCI+PC9mcy1tZW51LWl0ZW1zLWxpc3Q+XG4gIDwvZGl2PlxuPC9tYXQtbWVudT5cbiJdfQ==