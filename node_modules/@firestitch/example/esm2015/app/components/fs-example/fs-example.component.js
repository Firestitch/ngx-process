import { Component, Input } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { FsExampleService } from '../../services/fs-example.service';
import { FsDrawerAction, FsDrawerService } from '@firestitch/drawer-unique-namespace';
import { ExampleService } from '../../services/example.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../../services/fs-example.service";
import * as i3 from "@firestitch/drawer-unique-namespace";
import * as i4 from "../../services/example.service";
import * as i5 from "@angular/material/toolbar";
import * as i6 from "@angular/material/button";
import * as i7 from "@angular/material/icon";
import * as i8 from "@angular/material/tabs";
import * as i9 from "../fs-example-highlight/fs-example-highlight.component";
import * as i10 from "@angular/material/card";
import * as i11 from "@angular/material/tooltip";
import * as i12 from "@angular/common";
export class FsExampleComponent {
    constructor(http, fsExampleService, drawer, exampleService) {
        this.http = http;
        this.fsExampleService = fsExampleService;
        this.drawer = drawer;
        this.exampleService = exampleService;
        this.showTabs = false;
        this.tabs = [];
        this.code = '';
        this.show = true;
        this.configureData = {};
    }
    toggleContent() {
        this.showTabs = !this.showTabs;
        this.tabs = [];
        if (this.showTabs) {
            this._loadComponents();
        }
    }
    configureClick() {
        if (this.drawerRef) {
            this.drawerRef.close();
        }
        this.drawerRef = this.drawer.open(this.configureComponent, {
            data: this.configureData,
            disableClose: false,
            position: 'right',
            width: {
                main: {
                    initial: 500,
                    min: 260,
                    // max: 1000,
                },
            },
            actions: [
                {
                    icon: 'clear',
                    type: FsDrawerAction.Button,
                    close: true
                }
            ]
        });
    }
    setConfigureComponent(component, data) {
        setTimeout(() => {
            if (!data) {
                data = {};
            }
            this.exampleService.exampleComponent = this;
            data.example = this.exampleService;
            this.configureComponent = component;
            this.configureData = data;
        });
    }
    _loadComponents() {
        this.fsExampleService.getFileContents(this.componentPath, this.componentName)
            .subscribe((files) => {
            files.forEach((file) => {
                file.name = file.type;
            });
            this._filesToTabs(files);
        });
        if (this.componentNames) {
            this.componentNames.split(',').forEach((name) => {
                this.fsExampleService.getFileContents(this.componentPath, name)
                    .subscribe((files) => {
                    this._filesToTabs(files);
                });
            });
        }
    }
    _filesToTabs(files) {
        const order = ['html', 'ts', 'css', 'scss'];
        const tabs = files.sort((a, b) => {
            return order.indexOf(a.type) - order.indexOf(b.type);
        });
        tabs.forEach((tab) => {
            this.tabs.push(tab);
        });
    }
}
FsExampleComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: FsExampleComponent, deps: [{ token: i1.HttpClient }, { token: i2.FsExampleService }, { token: i3.FsDrawerService }, { token: i4.ExampleService }], target: i0.ɵɵFactoryTarget.Component });
FsExampleComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: FsExampleComponent, selector: "fs-example", inputs: { name: "name", componentPath: "componentPath", componentName: "componentName", componentNames: "componentNames" }, providers: [ExampleService], ngImport: i0, template: "<div class=\"mat-elevation-z2\">\n  <mat-toolbar>\n    <span>{{name}}</span>\n    <div class=\"container\">\n      <ng-content select=\"[fs-example-actions]\"></ng-content>\n      <button mat-icon-button [matTooltip]=\"showTabs ? 'Hide Code' : 'View Code'\" (click)=\"toggleContent()\">\n        <mat-icon>code</mat-icon>\n      </button>\n\n      <button mat-icon-button *ngIf=\"configureComponent\" matTooltip=\"Configure Example\" (click)=\"configureClick()\">\n        <mat-icon>settings</mat-icon>\n      </button>\n    </div>\n  </mat-toolbar>\n  <div *ngIf=\"showTabs\">\n    <mat-tab-group>\n      <div *ngFor=\"let tab of tabs\">\n        <mat-tab label=\"{{tab.name | uppercase}}\">\n          <fs-example-highlight [source]=\"tab.code\" [language]=\"tab.type\"></fs-example-highlight>\n        </mat-tab>\n      </div>\n    </mat-tab-group>\n  </div>\n  <mat-card class=\"mat-elevation-z0\">\n    <div #items>\n      <div *ngIf=\"show\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  </mat-card>\n</div>\n", styles: [":host ::ng-deep .hljs{display:block;overflow-x:auto;padding:1em;background:#FAFAFA;color:#37474f;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;text-size-adjust:100%;font:300 100%/1 Roboto Mono,monospace;font-size:14px}:host ::ng-deep .hljs>*::selection,:host ::ng-deep .hljs-section{background-color:#d6edea}:host ::ng-deep .hljs-comment{color:#b0bec5;font-style:italic}:host ::ng-deep .hljs-tag,:host ::ng-deep .hljs-selector-tag,:host ::ng-deep .hljs-regexp,:host ::ng-deep .hljs-meta{color:#9c27b0}:host ::ng-deep .hljs-string,:host ::ng-deep .hljs-subst{color:#0d904f}:host ::ng-deep .hljs-number,:host ::ng-deep .hljs-variable,:host ::ng-deep .hljs-template-variable{color:#80cbc4}:host ::ng-deep .hljs-name,:host ::ng-deep .hljs-keyword,:host ::ng-deep .hljs-type,:host ::ng-deep .hljs-attribute{color:#3b78e7}:host ::ng-deep .hljs-title,:host ::ng-deep .hljs-function>.hljs-title,:host ::ng-deep .hljs-symbol,:host ::ng-deep .hljs-bullet,:host ::ng-deep .hljs-built_in,:host ::ng-deep .hljs-builtin-name,:host ::ng-deep .hljs-link{color:#6182b8}:host ::ng-deep .hljs-params{color:#d81b60}:host ::ng-deep .hljs-addition{color:#3b78e7;display:inline-block;width:100%}:host ::ng-deep .hljs-deletion{color:#e53935;display:inline-block;width:100%}:host ::ng-deep .hljs-selector-id,:host ::ng-deep .hljs-selector-class{color:#8796b0}:host ::ng-deep .hljs-emphasis{font-style:italic}:host ::ng-deep .hljs-strong{font-weight:bold}:host ::ng-deep .hljs-link{text-decoration:underline}mat-toolbar{color:#0000008a;font-size:16px;display:flex;justify-content:space-between}.example-code{border-bottom:1px solid rgba(0,0,0,.1);font-family:monospace;margin:0;padding:15px!important}:host{padding:20px 0;display:block}:host mat-toolbar span{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}\n"], components: [{ type: i5.MatToolbar, selector: "mat-toolbar", inputs: ["color"], exportAs: ["matToolbar"] }, { type: i6.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { type: i7.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { type: i8.MatTabGroup, selector: "mat-tab-group", inputs: ["color", "disableRipple"], exportAs: ["matTabGroup"] }, { type: i8.MatTab, selector: "mat-tab", inputs: ["disabled", "label", "aria-label", "aria-labelledby"], exportAs: ["matTab"] }, { type: i9.FsExampleHighlightComponent, selector: "fs-example-highlight", inputs: ["language", "source"] }, { type: i10.MatCard, selector: "mat-card", exportAs: ["matCard"] }], directives: [{ type: i11.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { type: i12.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i12.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }], pipes: { "uppercase": i12.UpperCasePipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: FsExampleComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'fs-example',
                    templateUrl: 'fs-example.component.html',
                    styleUrls: ['fs-example.component.scss'],
                    providers: [ExampleService]
                }]
        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: i2.FsExampleService }, { type: i3.FsDrawerService }, { type: i4.ExampleService }]; }, propDecorators: { name: [{
                type: Input
            }], componentPath: [{
                type: Input
            }], componentName: [{
                type: Input
            }], componentNames: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnMtZXhhbXBsZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvYXBwL2NvbXBvbmVudHMvZnMtZXhhbXBsZS9mcy1leGFtcGxlLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9hcHAvY29tcG9uZW50cy9mcy1leGFtcGxlL2ZzLWV4YW1wbGUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDakQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxjQUFjLEVBQUUsZUFBZSxFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFDdEYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGdDQUFnQyxDQUFDOzs7Ozs7Ozs7Ozs7OztBQVVoRSxNQUFNLE9BQU8sa0JBQWtCO0lBZTdCLFlBQ1UsSUFBZ0IsRUFDaEIsZ0JBQWtDLEVBQ25DLE1BQXVCLEVBQ3ZCLGNBQThCO1FBSDdCLFNBQUksR0FBSixJQUFJLENBQVk7UUFDaEIscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNuQyxXQUFNLEdBQU4sTUFBTSxDQUFpQjtRQUN2QixtQkFBYyxHQUFkLGNBQWMsQ0FBZ0I7UUFqQmhDLGFBQVEsR0FBWSxLQUFLLENBQUM7UUFDMUIsU0FBSSxHQUFHLEVBQUUsQ0FBQztRQUNWLFNBQUksR0FBRyxFQUFFLENBQUM7UUFDVixTQUFJLEdBQUcsSUFBSSxDQUFDO1FBRVosa0JBQWEsR0FBRyxFQUFFLENBQUM7SUFhdkIsQ0FBQztJQUVHLGFBQWE7UUFDbEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDL0IsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7UUFFZixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDakIsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1NBQ3hCO0lBQ0gsQ0FBQztJQUVNLGNBQWM7UUFFbkIsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2xCLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDeEI7UUFFRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtZQUN6RCxJQUFJLEVBQUUsSUFBSSxDQUFDLGFBQWE7WUFDeEIsWUFBWSxFQUFFLEtBQUs7WUFDbkIsUUFBUSxFQUFFLE9BQU87WUFDakIsS0FBSyxFQUFFO2dCQUNMLElBQUksRUFBRTtvQkFDSixPQUFPLEVBQUUsR0FBRztvQkFDWixHQUFHLEVBQUUsR0FBRztvQkFDUixhQUFhO2lCQUNkO2FBQ0Y7WUFDRCxPQUFPLEVBQUU7Z0JBQ1A7b0JBQ0UsSUFBSSxFQUFFLE9BQU87b0JBQ2IsSUFBSSxFQUFFLGNBQWMsQ0FBQyxNQUFNO29CQUMzQixLQUFLLEVBQUUsSUFBSTtpQkFDWjthQUNGO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVNLHFCQUFxQixDQUFDLFNBQVMsRUFBRSxJQUFJO1FBRTFDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUNULElBQUksR0FBRyxFQUFFLENBQUM7YUFDWDtZQUVELElBQUksQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO1lBQzVDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztZQUVuQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsU0FBUyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO1FBQzVCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVPLGVBQWU7UUFDckIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUM7YUFDMUUsU0FBUyxDQUFDLENBQUMsS0FBVSxFQUFFLEVBQUU7WUFFeEIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO2dCQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDeEIsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzNCLENBQUMsQ0FBQyxDQUFDO1FBRUwsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO1lBRXZCLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO2dCQUM5QyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDO3FCQUM1RCxTQUFTLENBQUMsQ0FBQyxLQUFVLEVBQUUsRUFBRTtvQkFDeEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDM0IsQ0FBQyxDQUFDLENBQUM7WUFDUCxDQUFDLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQztJQUVPLFlBQVksQ0FBQyxLQUFLO1FBQ3hCLE1BQU0sS0FBSyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFNUMsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQU0sRUFBRSxDQUFNLEVBQUUsRUFBRTtZQUN6QyxPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3RELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO1lBQ25CLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQzs7Z0hBekdVLGtCQUFrQjtvR0FBbEIsa0JBQWtCLGlLQUhsQixDQUFDLGNBQWMsQ0FBQywwQkNYN0IsNGdDQStCQTs0RkRqQmEsa0JBQWtCO2tCQVA5QixTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxZQUFZO29CQUN0QixXQUFXLEVBQUUsMkJBQTJCO29CQUN4QyxTQUFTLEVBQUUsQ0FBQywyQkFBMkIsQ0FBQztvQkFDeEMsU0FBUyxFQUFFLENBQUMsY0FBYyxDQUFDO2lCQUM1QjsyTEFZVSxJQUFJO3NCQUFaLEtBQUs7Z0JBQ0csYUFBYTtzQkFBckIsS0FBSztnQkFDRyxhQUFhO3NCQUFyQixLQUFLO2dCQUNHLGNBQWM7c0JBQXRCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgRnNFeGFtcGxlU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2ZzLWV4YW1wbGUuc2VydmljZSc7XG5pbXBvcnQgeyBGc0RyYXdlckFjdGlvbiwgRnNEcmF3ZXJTZXJ2aWNlIH0gZnJvbSAnQGZpcmVzdGl0Y2gvZHJhd2VyLXVuaXF1ZS1uYW1lc3BhY2UnO1xuaW1wb3J0IHsgRXhhbXBsZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9leGFtcGxlLnNlcnZpY2UnO1xuXG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2ZzLWV4YW1wbGUnLFxuICB0ZW1wbGF0ZVVybDogJ2ZzLWV4YW1wbGUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnZnMtZXhhbXBsZS5jb21wb25lbnQuc2NzcyddLFxuICBwcm92aWRlcnM6IFtFeGFtcGxlU2VydmljZV1cbn0pXG5cbmV4cG9ydCBjbGFzcyBGc0V4YW1wbGVDb21wb25lbnQge1xuXG4gIHB1YmxpYyBzaG93VGFiczogQm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgdGFicyA9IFtdO1xuICBwdWJsaWMgY29kZSA9ICcnO1xuICBwdWJsaWMgc2hvdyA9IHRydWU7XG4gIHB1YmxpYyBjb25maWd1cmVDb21wb25lbnQ7XG4gIHB1YmxpYyBjb25maWd1cmVEYXRhID0ge307XG4gIHB1YmxpYyBkcmF3ZXJSZWY7XG5cbiAgQElucHV0KCkgbmFtZTogc3RyaW5nO1xuICBASW5wdXQoKSBjb21wb25lbnRQYXRoOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbXBvbmVudE5hbWU6IHN0cmluZztcbiAgQElucHV0KCkgY29tcG9uZW50TmFtZXM6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsXG4gICAgcHJpdmF0ZSBmc0V4YW1wbGVTZXJ2aWNlOiBGc0V4YW1wbGVTZXJ2aWNlLFxuICAgIHB1YmxpYyBkcmF3ZXI6IEZzRHJhd2VyU2VydmljZSxcbiAgICBwdWJsaWMgZXhhbXBsZVNlcnZpY2U6IEV4YW1wbGVTZXJ2aWNlXG4gICkge31cblxuICBwdWJsaWMgdG9nZ2xlQ29udGVudCgpIHtcbiAgICB0aGlzLnNob3dUYWJzID0gIXRoaXMuc2hvd1RhYnM7XG4gICAgdGhpcy50YWJzID0gW107XG5cbiAgICBpZiAodGhpcy5zaG93VGFicykge1xuICAgICAgdGhpcy5fbG9hZENvbXBvbmVudHMoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY29uZmlndXJlQ2xpY2soKSB7XG5cbiAgICBpZiAodGhpcy5kcmF3ZXJSZWYpIHtcbiAgICAgIHRoaXMuZHJhd2VyUmVmLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5kcmF3ZXJSZWYgPSB0aGlzLmRyYXdlci5vcGVuKHRoaXMuY29uZmlndXJlQ29tcG9uZW50LCB7XG4gICAgICBkYXRhOiB0aGlzLmNvbmZpZ3VyZURhdGEsXG4gICAgICBkaXNhYmxlQ2xvc2U6IGZhbHNlLFxuICAgICAgcG9zaXRpb246ICdyaWdodCcsXG4gICAgICB3aWR0aDoge1xuICAgICAgICBtYWluOiB7XG4gICAgICAgICAgaW5pdGlhbDogNTAwLFxuICAgICAgICAgIG1pbjogMjYwLFxuICAgICAgICAgIC8vIG1heDogMTAwMCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBhY3Rpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpY29uOiAnY2xlYXInLFxuICAgICAgICAgIHR5cGU6IEZzRHJhd2VyQWN0aW9uLkJ1dHRvbixcbiAgICAgICAgICBjbG9zZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uZmlndXJlQ29tcG9uZW50KGNvbXBvbmVudCwgZGF0YSkge1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgZGF0YSA9IHt9O1xuICAgICAgfVxuXG4gICAgICB0aGlzLmV4YW1wbGVTZXJ2aWNlLmV4YW1wbGVDb21wb25lbnQgPSB0aGlzO1xuICAgICAgZGF0YS5leGFtcGxlID0gdGhpcy5leGFtcGxlU2VydmljZTtcblxuICAgICAgdGhpcy5jb25maWd1cmVDb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgICB0aGlzLmNvbmZpZ3VyZURhdGEgPSBkYXRhO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfbG9hZENvbXBvbmVudHMoKSB7XG4gICAgdGhpcy5mc0V4YW1wbGVTZXJ2aWNlLmdldEZpbGVDb250ZW50cyh0aGlzLmNvbXBvbmVudFBhdGgsIHRoaXMuY29tcG9uZW50TmFtZSlcbiAgICAgIC5zdWJzY3JpYmUoKGZpbGVzOiBhbnkpID0+IHtcblxuICAgICAgICBmaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICAgICAgZmlsZS5uYW1lID0gZmlsZS50eXBlO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9maWxlc1RvVGFicyhmaWxlcyk7XG4gICAgICB9KTtcblxuICAgIGlmICh0aGlzLmNvbXBvbmVudE5hbWVzKSB7XG5cbiAgICAgIHRoaXMuY29tcG9uZW50TmFtZXMuc3BsaXQoJywnKS5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICAgIHRoaXMuZnNFeGFtcGxlU2VydmljZS5nZXRGaWxlQ29udGVudHModGhpcy5jb21wb25lbnRQYXRoLCBuYW1lKVxuICAgICAgICAgIC5zdWJzY3JpYmUoKGZpbGVzOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2ZpbGVzVG9UYWJzKGZpbGVzKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2ZpbGVzVG9UYWJzKGZpbGVzKSB7XG4gICAgY29uc3Qgb3JkZXIgPSBbJ2h0bWwnLCAndHMnLCAnY3NzJywgJ3Njc3MnXTtcblxuICAgIGNvbnN0IHRhYnMgPSBmaWxlcy5zb3J0KChhOiBhbnksIGI6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIG9yZGVyLmluZGV4T2YoYS50eXBlKSAtIG9yZGVyLmluZGV4T2YoYi50eXBlKVxuICAgIH0pO1xuXG4gICAgdGFicy5mb3JFYWNoKCh0YWIpID0+IHtcbiAgICAgIHRoaXMudGFicy5wdXNoKHRhYik7XG4gICAgfSk7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJtYXQtZWxldmF0aW9uLXoyXCI+XG4gIDxtYXQtdG9vbGJhcj5cbiAgICA8c3Bhbj57e25hbWV9fTwvc3Bhbj5cbiAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJbZnMtZXhhbXBsZS1hY3Rpb25zXVwiPjwvbmctY29udGVudD5cbiAgICAgIDxidXR0b24gbWF0LWljb24tYnV0dG9uIFttYXRUb29sdGlwXT1cInNob3dUYWJzID8gJ0hpZGUgQ29kZScgOiAnVmlldyBDb2RlJ1wiIChjbGljayk9XCJ0b2dnbGVDb250ZW50KClcIj5cbiAgICAgICAgPG1hdC1pY29uPmNvZGU8L21hdC1pY29uPlxuICAgICAgPC9idXR0b24+XG5cbiAgICAgIDxidXR0b24gbWF0LWljb24tYnV0dG9uICpuZ0lmPVwiY29uZmlndXJlQ29tcG9uZW50XCIgbWF0VG9vbHRpcD1cIkNvbmZpZ3VyZSBFeGFtcGxlXCIgKGNsaWNrKT1cImNvbmZpZ3VyZUNsaWNrKClcIj5cbiAgICAgICAgPG1hdC1pY29uPnNldHRpbmdzPC9tYXQtaWNvbj5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICA8L21hdC10b29sYmFyPlxuICA8ZGl2ICpuZ0lmPVwic2hvd1RhYnNcIj5cbiAgICA8bWF0LXRhYi1ncm91cD5cbiAgICAgIDxkaXYgKm5nRm9yPVwibGV0IHRhYiBvZiB0YWJzXCI+XG4gICAgICAgIDxtYXQtdGFiIGxhYmVsPVwie3t0YWIubmFtZSB8IHVwcGVyY2FzZX19XCI+XG4gICAgICAgICAgPGZzLWV4YW1wbGUtaGlnaGxpZ2h0IFtzb3VyY2VdPVwidGFiLmNvZGVcIiBbbGFuZ3VhZ2VdPVwidGFiLnR5cGVcIj48L2ZzLWV4YW1wbGUtaGlnaGxpZ2h0PlxuICAgICAgICA8L21hdC10YWI+XG4gICAgICA8L2Rpdj5cbiAgICA8L21hdC10YWItZ3JvdXA+XG4gIDwvZGl2PlxuICA8bWF0LWNhcmQgY2xhc3M9XCJtYXQtZWxldmF0aW9uLXowXCI+XG4gICAgPGRpdiAjaXRlbXM+XG4gICAgICA8ZGl2ICpuZ0lmPVwic2hvd1wiPlxuICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9tYXQtY2FyZD5cbjwvZGl2PlxuIl19